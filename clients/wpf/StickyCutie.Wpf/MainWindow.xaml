<Window x:Class="StickyCutie.Wpf.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:StickyCutie.Wpf"
        xmlns:controls="clr-namespace:StickyCutie.Wpf.Controls"
        Title="StickyCutie"
        Width="320" Height="260"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        Topmost="False"
        ShowInTaskbar="True"
        ResizeMode="CanResizeWithGrip"
        WindowStartupLocation="CenterScreen"
        WindowState="Normal"
        UseLayoutRounding="True">
    <Window.Resources>
        <SolidColorBrush x:Key="IconStrokeBrush" Color="#5A5A5A"/>
        <Style x:Key="IconButton" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="0"/>
            <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
            <Setter Property="Focusable" Value="False"/>
            <Setter Property="HorizontalContentAlignment" Value="Center"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="4">
                            <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                              VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <Style TargetType="ScrollBar">
            <Setter Property="Width" Value="3"/>
            <Setter Property="Foreground" Value="#888888"/>
            <Setter Property="Background" Value="#00000000"/>
            <Setter Property="Opacity" Value="0"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Opacity" Value="1"/>
                </Trigger>
            </Style.Triggers>
        </Style>
        <Style x:Key="ToolbarIconStyle" TargetType="{x:Type controls:SvgIcon}">
            <Setter Property="Width" Value="18"/>
            <Setter Property="Height" Value="18"/>
            <Setter Property="HorizontalAlignment" Value="Center"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
            <Setter Property="IconBrush" Value="#FF5A5A5A"/>
        </Style>
        <Style x:Key="SwatchButtonStyle" TargetType="Button">
            <Setter Property="Width" Value="32"/>
            <Setter Property="Height" Value="24"/>
            <Setter Property="Margin" Value="4"/>
            <Setter Property="BorderBrush" Value="#AA6A6A6A"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Background" Value="#FFEFEFEF"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                CornerRadius="4"
                                BorderThickness="{TemplateBinding BorderThickness}">
                            <ContentPresenter HorizontalAlignment="Center"
                                              VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <Style x:Key="HighlightSwatchStyle" TargetType="Button">
            <Setter Property="Width" Value="22"/>
            <Setter Property="Height" Value="22"/>
            <Setter Property="Margin" Value="2,0"/>
            <Setter Property="Padding" Value="0"/>
            <Setter Property="Focusable" Value="False"/>
            <Setter Property="BorderBrush" Value="#B0B0B0"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Background" Value="#FFFBE380"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="4"/>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>
    <Border x:Name="RootBorder"
            Margin="-1"
            CornerRadius="0"
            Background="#FFF59A"
            BorderBrush="#D4B445"
            BorderThickness="1"
            Padding="0"
            RenderTransformOrigin="0.5,0.5"
            MouseLeftButtonDown="RootBorder_MouseLeftButtonDown"
            SnapsToDevicePixels="True">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="*"/>
                <RowDefinition Height="28"/>
            </Grid.RowDefinitions>

            <Grid Grid.Row="0">
                <RichTextBox x:Name="NoteRichText" BorderThickness="0" Background="Transparent" FontSize="14" AcceptsReturn="True" VerticalContentAlignment="Top" Margin="8,24,8,0" Padding="4" 
                              ScrollViewer.VerticalScrollBarVisibility="Auto" ScrollViewer.CanContentScroll="True">
                    <FlowDocument>
                        <Paragraph/>
                    </FlowDocument>
                </RichTextBox>
                
                <Button x:Name="AddButton" Width="24" Height="24" Style="{StaticResource IconButton}" Click="AddButton_Click" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="0" Panel.ZIndex="10">
                    <Grid Width="20" Height="20">
                        <Path Stroke="#5A5A5A" StrokeThickness="1.2" StrokeStartLineCap="Round" StrokeEndLineCap="Round" Data="M 10 3 L 10 17 M 3 10 L 17 10"/>
                    </Grid>
                </Button>
                <Button x:Name="CloseButton" Width="24" Height="24" Style="{StaticResource IconButton}" Click="CloseButton_Click" HorizontalAlignment="Right" VerticalAlignment="Top" Margin="0" Panel.ZIndex="10">
                    <Grid Width="20" Height="20">
                        <Path Stroke="#5A5A5A" StrokeThickness="1.2" StrokeStartLineCap="Round" StrokeEndLineCap="Round" Data="M 4 4 L 16 16 M 16 4 L 4 16"/>
                    </Grid>
                </Button>
            </Grid>

            <Grid Grid.Row="1" x:Name="ToolbarArea" Background="Transparent" MouseEnter="ToolbarArea_MouseEnter" MouseLeave="ToolbarArea_MouseLeave">
                <StackPanel x:Name="ToolbarContainer"
                            Orientation="Horizontal"
                            HorizontalAlignment="Center"
                            Visibility="Collapsed"
                            Margin="0">
                    <Button Width="24"
                            Height="24"
                            Margin="0,0,2,0"
                            Style="{StaticResource IconButton}"
                            Command="EditingCommands.ToggleBold"
                            CommandTarget="{Binding ElementName=NoteRichText}">
                        <Grid Width="18" Height="18">
                            <Path Stroke="#5A5A5A"
                                  StrokeThickness="1.4"
                                  StrokeStartLineCap="Round"
                                  StrokeEndLineCap="Round"
                                  Data="M 4 4 L 10 4 C 13 4 13 8 10 9 C 14 9 14 13 10 14 L 4 14 Z"/>
                        </Grid>
                    </Button>
                    <Button x:Name="PaletteButton"
                            Width="24"
                            Height="24"
                            Margin="2,0"
                            Style="{StaticResource IconButton}"
                            Click="PaletteButton_Click"
                            MouseEnter="PaletteButton_MouseEnter"
                            MouseLeave="PaletteButton_MouseLeave">
                        <controls:SvgIcon Style="{StaticResource ToolbarIconStyle}"
                                          SvgPath="Assets/icons/palette.svg"/>
                    </Button>
                    <Button Width="24"
                            Height="24"
                            Margin="2,0"
                            Style="{StaticResource IconButton}"
                            Click="ListButton_Click">
                        <controls:SvgIcon Style="{StaticResource ToolbarIconStyle}"
                                          SvgPath="Assets/icons/list.svg"/>
                    </Button>
                    <Button x:Name="ImageButton"
                            Width="24"
                            Height="24"
                            Margin="2,0"
                            Style="{StaticResource IconButton}"
                            Click="ImageButton_Click">
                        <controls:SvgIcon Style="{StaticResource ToolbarIconStyle}"
                                          SvgPath="Assets/icons/image.svg"/>
                    </Button>
                    <Button x:Name="AlarmButton"
                            Width="24"
                            Height="24"
                            Margin="2,0"
                            Style="{StaticResource IconButton}"
                            Click="AlarmButton_Click">
                        <Grid>
                            <controls:SvgIcon Style="{StaticResource ToolbarIconStyle}"
                                              SvgPath="Assets/icons/alarm-clock.svg"/>
                            <Ellipse x:Name="AlarmBadge"
                                     Width="6"
                                     Height="6"
                                     Fill="#FFD966"
                                     StrokeThickness="0"
                                     HorizontalAlignment="Right"
                                     VerticalAlignment="Top"
                                     Margin="0,2,2,0"
                                     Visibility="Collapsed"/>
                        </Grid>
                    </Button>
                    <Button Width="24"
                            Height="24"
                            Margin="2,0"
                            Style="{StaticResource IconButton}"
                            Command="ApplicationCommands.Copy"
                            CommandTarget="{Binding ElementName=NoteRichText}">
                        <controls:SvgIcon Style="{StaticResource ToolbarIconStyle}"
                                          SvgPath="Assets/icons/copy.svg"/>
                    </Button>
                    <Button Width="24"
                            Height="24"
                            Margin="2,0"
                            Style="{StaticResource IconButton}"
                            Command="ApplicationCommands.Paste"
                            CommandTarget="{Binding ElementName=NoteRichText}">
                        <controls:SvgIcon Style="{StaticResource ToolbarIconStyle}"
                                          SvgPath="Assets/icons/clipboard.svg"/>
                    </Button>
                    <Button Width="24"
                            Height="24"
                            Margin="2,0"
                            Style="{StaticResource IconButton}"
                            Command="ApplicationCommands.Undo"
                            CommandTarget="{Binding ElementName=NoteRichText}">
                        <controls:SvgIcon Style="{StaticResource ToolbarIconStyle}"
                                          SvgPath="Assets/icons/undo-2.svg"/>
                    </Button>
                    <Button Width="24"
                            Height="24"
                            Margin="2,0"
                            Style="{StaticResource IconButton}"
                            Command="ApplicationCommands.Redo"
                            CommandTarget="{Binding ElementName=NoteRichText}">
                        <controls:SvgIcon Style="{StaticResource ToolbarIconStyle}"
                                          SvgPath="Assets/icons/redo-2.svg"/>
                    </Button>
                    <Button x:Name="PinButton"
                            Width="24"
                            Height="24"
                            Margin="2,0"
                            Style="{StaticResource IconButton}"
                            Click="PinButton_Click">
                        <Grid>
                            <controls:SvgIcon x:Name="PinOnIcon"
                                              Style="{StaticResource ToolbarIconStyle}"
                                              IconBrush="#5A5A5A"
                                              SvgPath="Assets/icons/pin-on.svg"/>
                            <controls:SvgIcon x:Name="PinOffIcon"
                                              Style="{StaticResource ToolbarIconStyle}"
                                              IconBrush="#B0B0B0"
                                              SvgPath="Assets/icons/pin-off.svg"
                                              Visibility="Collapsed"/>
                        </Grid>
                    </Button>
                    <Button x:Name="LockButton"
                            Width="24"
                            Height="24"
                            Margin="2,0"
                            Style="{StaticResource IconButton}"
                            Click="LockButton_Click">
                        <Grid>
                            <controls:SvgIcon x:Name="LockClosedIcon"
                                              Style="{StaticResource ToolbarIconStyle}"
                                              SvgPath="Assets/icons/lock-keyhole.svg"/>
                            <controls:SvgIcon x:Name="LockOpenIcon"
                                              Style="{StaticResource ToolbarIconStyle}"
                                              SvgPath="Assets/icons/lock-keyhole-open.svg"
                                              Visibility="Collapsed"/>
                        </Grid>
                    </Button>
                    <Button x:Name="MenuButton"
                            Width="44"
                            Height="26"
                            Margin="2,0,0,0"
                            Style="{StaticResource IconButton}"
                            Click="MenuButton_Click">
                        <controls:SvgIcon Style="{StaticResource ToolbarIconStyle}"
                                          SvgPath="Assets/icons/menu.svg"/>
                    </Button>
                </StackPanel>
            </Grid>

            <Popup x:Name="TextColorPopup"
                   Placement="Top"
                   StaysOpen="True"
                   MouseEnter="TextColorPopup_MouseEnter"
                   MouseLeave="TextColorPopup_MouseLeave">
                <Border CornerRadius="6" Background="#F7F7F7" BorderBrush="#DDDDDD" BorderThickness="1" Padding="8">
                    <StackPanel Orientation="Horizontal">
                        <Button Style="{StaticResource HighlightSwatchStyle}" Background="#FFFBE380" BorderBrush="#B0A35A" Click="TextColorButton_Click" Tag="#FFFBE380"/>
                        <Button Style="{StaticResource HighlightSwatchStyle}" Background="#FF7EE081" BorderBrush="#5FA863" Click="TextColorButton_Click" Tag="#FF7EE081"/>
                        <Button Style="{StaticResource HighlightSwatchStyle}" Background="#FF78B7FF" BorderBrush="#5A95CC" Click="TextColorButton_Click" Tag="#FF78B7FF"/>
                        <Button Style="{StaticResource HighlightSwatchStyle}" Background="#FFFF84C1" BorderBrush="#C76A9A" Click="TextColorButton_Click" Tag="#FFFF84C1"/>
                    </StackPanel>
                </Border>
            </Popup>
            
            <Grid x:Name="AlarmInlineOverlay"
                  Grid.RowSpan="2"
                  Visibility="Collapsed"
                  Background="#00FFFFFF"
                  Panel.ZIndex="60">
                <Border HorizontalAlignment="Right"
                        VerticalAlignment="Top"
                        Margin="0,34,12,0"
                        Background="#FFFFF9D9"
                        BorderBrush="#E3C862"
                        BorderThickness="1"
                        CornerRadius="10"
                        Padding="12"
                        Width="190">
                    <StackPanel>
                        <TextBlock Text="Alarme da nota"
                                   FontWeight="Bold"
                                   Foreground="#5A4708"
                                   Margin="0,0,0,6"/>
                        <TextBlock Text="Lembre-se desta anotação."
                                   TextWrapping="Wrap"
                                   Foreground="#5A5A5A"
                                   Margin="0,0,0,10"/>
                        <StackPanel Orientation="Horizontal"
                                    HorizontalAlignment="Right">
                            <Button x:Name="AlarmInlineSnoozeButton"
                                    Content="Adiar"
                                    Width="70"
                                    Margin="0,0,8,0"
                                    Click="AlarmInlineSnoozeButton_Click"/>
                            <Button x:Name="AlarmInlineStopButton"
                                    Content="Parar"
                                    Width="70"
                                    Click="AlarmInlineStopButton_Click"/>
                        </StackPanel>
                    </StackPanel>
                </Border>
            </Grid>
            
            <Grid x:Name="LockOverlay" Grid.Row="0" Visibility="Collapsed" Background="#00000020" Panel.ZIndex="50">
                <Grid HorizontalAlignment="Center" VerticalAlignment="Center" Width="120" Height="120">
                    <Ellipse x:Name="LockCircle"
                             Fill="{Binding ElementName=RootBorder, Path=Background}"
                             Stroke="{Binding ElementName=RootBorder, Path=BorderBrush}"
                             StrokeThickness="1"/>
                    <TextBlock Text="&#xE72E;" FontFamily="Segoe MDL2 Assets" FontSize="44" Foreground="#5A5A5A" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                </Grid>
            </Grid>

            <Grid x:Name="PasswordModal" Visibility="Collapsed" Background="#00000040" Panel.ZIndex="100">
                <Border HorizontalAlignment="Center" VerticalAlignment="Center" Background="#FFFFFF" BorderBrush="#DDDDDD" BorderThickness="1" Padding="16" CornerRadius="6" Width="260">
                    <StackPanel>
                        <TextBlock x:Name="PasswordModalTitle" Text="Definir senha" Margin="0,0,0,8" FontWeight="Bold"/>
                        <PasswordBox x:Name="PasswordBox1" Margin="0,0,0,8"/>
                        <PasswordBox x:Name="PasswordBox2" Margin="0,0,0,12"/>
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                            <Button x:Name="PasswordRemove" Content="Remover senha" Margin="0,0,8,0" Click="PasswordRemove_Click"/>
                            <Button x:Name="PasswordCancel" Content="Cancelar" Margin="0,0,8,0" Click="PasswordCancel_Click"/>
                            <Button x:Name="PasswordConfirm" Content="Confirmar" Click="PasswordConfirm_Click"/>
                        </StackPanel>
                    </StackPanel>
                </Border>
            </Grid>
            <Popup x:Name="NoteMenuPopup"
                   Placement="Right"
                   PlacementTarget="{Binding ElementName=MenuButton}"
                   StaysOpen="False"
                   AllowsTransparency="True"
                   PopupAnimation="Fade">
                <Border Background="#FFFDFCF5"
                        BorderBrush="#D6C794"
                        BorderThickness="1"
                        CornerRadius="8"
                        Padding="14"
                        Width="220">
                    <StackPanel>
                        <TextBlock Text="StickyCutie"
                                   FontWeight="Bold"
                                   FontSize="16"
                                   Foreground="#5A3E03"/>
                        <TextBlock Text="Personalize sua nota"
                                   Foreground="#7A6D41"
                                   FontSize="11"
                                   Margin="0,0,0,8"/>
                        <WrapPanel x:Name="NoteColorPanel">
                            <Button Style="{StaticResource SwatchButtonStyle}"
                                    Background="#FFF794"
                                    BorderBrush="#E6D463"
                                    Tag="#FFF794|#E6D463"
                                    Click="NoteColorButton_Click"/>
                            <Button Style="{StaticResource SwatchButtonStyle}"
                                    Background="#A9F5A2"
                                    BorderBrush="#6EC36D"
                                    Tag="#A9F5A2|#6EC36D"
                                    Click="NoteColorButton_Click"/>
                            <Button Style="{StaticResource SwatchButtonStyle}"
                                    Background="#F8B2E6"
                                    BorderBrush="#D883C1"
                                    Tag="#F8B2E6|#D883C1"
                                    Click="NoteColorButton_Click"/>
                            <Button Style="{StaticResource SwatchButtonStyle}"
                                    Background="#D1B8FF"
                                    BorderBrush="#A18DD1"
                                    Tag="#D1B8FF|#A18DD1"
                                    Click="NoteColorButton_Click"/>
                            <Button Style="{StaticResource SwatchButtonStyle}"
                                    Background="#B8DAFF"
                                    BorderBrush="#7BB0E8"
                                    Tag="#B8DAFF|#7BB0E8"
                                    Click="NoteColorButton_Click"/>
                            <Button Style="{StaticResource SwatchButtonStyle}"
                                    Background="#C6C6C6"
                                    BorderBrush="#8A8A8A"
                                    Tag="#C6C6C6|#8A8A8A"
                                    Click="NoteColorButton_Click"/>
                        </WrapPanel>
                        <Separator Margin="0,12,0,8"/>
                        <TextBlock Text="Lista de anotações"
                                   Foreground="#5A5A5A"
                                   FontSize="12"
                                   Margin="0,0,0,4"/>
                        <Button Content="Excluir anotação"
                                HorizontalAlignment="Left"
                                Padding="0"
                                Background="Transparent"
                                BorderThickness="0"
                                Foreground="#C33A2F"
                                Click="DeleteNoteButton_Click"/>
                    </StackPanel>
                </Border>
            </Popup>
        </Grid>
    </Border>
</Window>
